    <!DOCTYPE html>
    <html lang="en">
    <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PortaFlux Offer Center - Earn Laur Coins</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
    :root {
    --primary: #6a11cb;
    --secondary: #2575fc;
    --accent: #ff6b6b;
    --success: #1dd1a1;
    --warning: #feca57;
    --dark: #2d3436;
    --light: #f7f9fc;
    --card-bg: #ffffff;
    --bg-gradient: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
    --dark-bg: #121826;
    --dark-card: #1e293b;
    }
    
    * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
    background-color: #f0f2f5;
    color: var(--dark);
    min-height: 100vh;
    padding-bottom: 80px;
    position: relative;
    }
    
    .dark-mode {
    background-color: var(--dark-bg);
    color: #e0e0e0;
    }
    
    .app-container {
    max-width: 1200px;
    margin: 0 auto;
    background: white;
    min-height: 100vh;
    box-shadow: 0 0 30px rgba(0,0,0,0.1);
    position: relative;
    overflow: hidden;
    }
    
    .dark-mode .app-container {
    background: var(--dark-bg);
    box-shadow: 0 0 30px rgba(0,0,0,0.3);
    }
    
    /* Header Styles */
    .header {
    background: var(--bg-gradient);
    color: white;
    padding: 15px 20px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    display: flex;
    justify-content: space-between;
    align-items: center;
    }
    
    .dark-mode .header {
    background: linear-gradient(135deg, #4a1b8c 0%, #1a4fb3 100%);
    }
    
    .logo {
    display: flex;
    align-items: center;
    gap: 10px;
    font-weight: 700;
    font-size: 1.4rem;
    }
    
    .logo-icon {
    background: rgba(255,255,255,0.2);
    width: 40px;
    height: 40px;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    
    .header-controls {
    display: flex;
    align-items: center;
    gap: 15px;
    }
    
    .coin-display {
    background: rgba(255,255,255,0.2);
    border-radius: 20px;
    padding: 6px 15px;
    font-weight: bold;
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 1rem;
    }
    
    .notification-icon {
    position: relative;
    font-size: 1.2rem;
    cursor: pointer;
    }
    
    .notification-badge {
    position: absolute;
    top: -5px;
    right: -5px;
    background: var(--accent);
    color: white;
    font-size: 10px;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    }
    
    .dark-switch {
    background: rgba(255,255,255,0.2);
    border-radius: 20px;
    padding: 5px 10px;
    display: flex;
    align-items: center;
    gap: 5px;
    cursor: pointer;
    }
    
    /* Main Content */
    .main-content {
    padding: 20px;
    min-height: calc(100vh - 140px);
    }
    
    /* Page Styles */
    .page {
    display: none;
    animation: fadeIn 0.3s ease;
    }
    
    .page.active {
    display: block;
    }
    
    @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
    }
    
    /* Card Styles */
    .card {
    border-radius: 16px;
    border: none;
    box-shadow: 0 5px 15px rgba(0,0,0,0.05);
    margin-bottom: 20px;
    transition: transform 0.3s, box-shadow 0.3s;
    background: var(--card-bg);
    overflow: hidden;
    }
    
    .dark-mode .card {
    background: var(--dark-card);
    box-shadow: 0 5px 15px rgba(0,0,0,0.2);
    }
    
    .card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    
    .card-header {
    background: rgba(37, 117, 252, 0.1);
    padding: 15px 20px;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    font-weight: 600;
    }
    
    .dark-mode .card-header {
    background: rgba(37, 117, 252, 0.15);
    border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    /* Banner */
    .banner {
    background: var(--bg-gradient);
    border-radius: 16px;
    color: white;
    padding: 30px 20px;
    margin-bottom: 25px;
    text-align: center;
    position: relative;
    overflow: hidden;
    }
    
    .banner::before {
    content: "";
    position: absolute;
    top: -50%;
    left: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%);
    transform: rotate(30deg);
    }
    
    .dark-mode .banner {
    background: linear-gradient(135deg, #4a1b8c 0%, #1a4fb3 100%);
    }
    
    /* Buttons */
    .btn-primary {
    background: var(--bg-gradient);
    border: none;
    font-weight: 600;
    padding: 10px 25px;
    border-radius: 50px;
    transition: all 0.3s;
    }
    
    .btn-primary:hover {
    transform: scale(1.05);
    box-shadow: 0 5px 15px rgba(106,17,203,0.4);
    }
    
    /* Navigation */
    .nav-bottom {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: white;
    border-top: 1px solid #eee;
    padding: 10px 0;
    z-index: 100;
    box-shadow: 0 -4px 12px rgba(0,0,0,0.05);
    display: flex;
    justify-content: space-around;
    }
    
    .dark-mode .nav-bottom {
    background: var(--dark-card);
    border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .nav-item {
    text-align: center;
    color: #777;
    font-size: 12px;
    transition: all 0.3s;
    cursor: pointer;
    flex: 1;
    padding: 5px 0;
    }
    
    .dark-mode .nav-item {
    color: #aaa;
    }
    
    .nav-item.active {
    color: var(--primary);
    font-weight: 600;
    }
    
    .dark-mode .nav-item.active {
    color: #8a63d2;
    }
    
    .nav-icon {
    font-size: 20px;
    display: block;
    margin: 0 auto 5px;
    }
    
    /* Task Styles */
    .offer-card {
    position: relative;
    overflow: hidden;
    border-radius: 12px;
    transition: all 0.3s;
    }
    
    .offer-badge {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--accent);
    color: white;
    padding: 3px 10px;
    border-radius: 20px;
    font-size: 12px;
    font-weight: bold;
    z-index: 2;
    }
    
    .task-thumbnail {
    height: 120px;
    background-size: cover;
    background-position: center;
    position: relative;
    }
    
    .task-content {
    padding: 15px;
    }
    
    .task-title {
    font-weight: 600;
    margin-bottom: 5px;
    }
    
    .task-meta {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 10px;
    }
    
    .task-coins {
    color: #f39c12;
    font-weight: 600;
    display: flex;
    align-items: center;
    gap: 5px;
    }
    
    /* Wallet Styles */
    .wallet-balance {
    text-align: center;
    margin-bottom: 30px;
    }
    
    .balance-amount {
    font-size: 3rem;
    font-weight: 700;
    color: #f39c12;
    margin: 10px 0;
    }
    
    .progress-container {
    background: rgba(0,0,0,0.05);
    border-radius: 10px;
    height: 10px;
    overflow: hidden;
    margin: 15px 0;
    }
    
    .dark-mode .progress-container {
    background: rgba(255,255,255,0.1);
    }
    
    .progress-bar {
    height: 100%;
    background: var(--success);
    border-radius: 10px;
    transition: width 0.5s ease;
    }
    
    /* Redeem Styles */
    .redeem-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin-top: 20px;
    }
    
    .redeem-card {
    border: 1px solid rgba(0,0,0,0.05);
    border-radius: 16px;
    overflow: hidden;
    transition: all 0.3s;
    }
    
    .dark-mode .redeem-card {
    border: 1px solid rgba(255,255,255,0.1);
    }
    
    .redeem-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
    
    .redeem-header {
    background: rgba(37, 117, 252, 0.1);
    padding: 15px;
    text-align: center;
    font-weight: 600;
    }
    
    .dark-mode .redeem-header {
    background: rgba(37, 117, 252, 0.15);
    }
    
    .redeem-body {
    padding: 20px;
    text-align: center;
    }
    
    .redeem-price {
    font-size: 2rem;
    font-weight: 700;
    color: #f39c12;
    margin: 15px 0;
    }
    
    .redeem-features {
    list-style: none;
    padding: 0;
    margin: 20px 0;
    text-align: left;
    }
    
    .redeem-features li {
    padding: 8px 0;
    display: flex;
    align-items: center;
    }
    
    .redeem-features li:before {
    content: "âœ“";
    color: var(--success);
    margin-right: 10px;
    font-weight: bold;
    }
    
    /* Spin Wheel Styles */
    .wheel-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px 0;
    }
    
    .wheel {
    width: 280px;
    height: 280px;
    position: relative;
    margin: 20px auto;
    border-radius: 50%;
    overflow: hidden;
    }
    
    .wheel-segment {
    position: absolute;
    width: 100%;
    height: 100%;
    clip-path: polygon(50% 50%, 100% 0, 100% 50%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 1.2rem;
    color: white;
    text-shadow: 0 1px 2px rgba(0,0,0,0.3);
    transform-origin: center;
    }
    
    .wheel-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 60px;
    height: 60px;
    background: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    color: var(--primary);
    box-shadow: 0 0 10px rgba(0,0,0,0.2);
    cursor: pointer;
    z-index: 10;
    }
    
    .wheel-pointer {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 30px;
    height: 40px;
    z-index: 20;
    }
    
    .spins-counter {
    background: rgba(37, 117, 252, 0.1);
    border-radius: 20px;
    padding: 8px 20px;
    font-weight: 600;
    margin-top: 15px;
    }
    
    .dark-mode .spins-counter {
    background: rgba(37, 117, 252, 0.15);
    }
    
    /* Feed Styles */
    .feed-item {
    display: flex;
    padding: 15px 0;
    border-bottom: 1px solid rgba(0,0,0,0.05);
    }
    
    .dark-mode .feed-item {
    border-bottom: 1px solid rgba(255,255,255,0.05);
    }
    
    .feed-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--primary);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    margin-right: 15px;
    flex-shrink: 0;
    }
    
    .feed-content {
    flex-grow: 1;
    }
    
    .feed-text {
    margin: 10px 0;
    }
    
    .feed-actions {
    display: flex;
    gap: 15px;
    }
    
    .comment-section {
    margin-top: 15px;
    display: none;
    }
    
    .comment-input {
    display: flex;
    gap: 10px;
    margin-top: 10px;
    }
    
    .comment-input input {
    flex-grow: 1;
    border-radius: 20px;
    padding: 8px 15px;
    border: 1px solid rgba(0,0,0,0.1);
    }
    
    .dark-mode .comment-input input {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.1);
    color: white;
    }
    
    /* Chat System */
    .chat-container {
    margin-top: 20px;
    border: 1px solid rgba(0,0,0,0.1);
    border-radius: 16px;
    overflow: hidden;
    max-height: 400px;
    display: flex;
    flex-direction: column;
    }
    
    .dark-mode .chat-container {
    border: 1px solid rgba(255,255,255,0.1);
    }
    
    .chat-header {
    background: rgba(37, 117, 252, 0.1);
    padding: 15px;
    font-weight: 600;
    text-align: center;
    }
    
    .dark-mode .chat-header {
    background: rgba(37, 117, 252, 0.15);
    }
    
    .chat-messages {
    flex-grow: 1;
    padding: 15px;
    overflow-y: auto;
    max-height: 300px;
    }
    
    .chat-message {
    margin-bottom: 15px;
    max-width: 80%;
    }
    
    .chat-message.sent {
    margin-left: auto;
    }
    
    .message-content {
    padding: 10px 15px;
    border-radius: 18px;
    background: rgba(37, 117, 252, 0.1);
    display: inline-block;
    }
    
    .dark-mode .message-content {
    background: rgba(37, 117, 252, 0.15);
    }
    
    .chat-message.sent .message-content {
    background: var(--primary);
    color: white;
    }
    
    .chat-input {
    display: flex;
    padding: 10px;
    border-top: 1px solid rgba(0,0,0,0.1);
    }
    
    .dark-mode .chat-input {
    border-top: 1px solid rgba(255,255,255,0.1);
    }
    
    .chat-input input {
    flex-grow: 1;
    border-radius: 20px 0 0 20px;
    padding: 8px 15px;
    border: 1px solid rgba(0,0,0,0.1);
    border-right: none;
    }
    
    .dark-mode .chat-input input {
    background: rgba(255,255,255,0.1);
    border: 1px solid rgba(255,255,255,0.1);
    color: white;
    }
    
    .chat-input button {
    border-radius: 0 20px 20px 0;
    white-space: nowrap;
    }
    
    /* Admin Panel */
    .admin-login {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0,0,0,0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    }
    
    .login-box {
    background: white;
    border-radius: 16px;
    padding: 30px;
    width: 90%;
    max-width: 400px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    
    .dark-mode .login-box {
    background: var(--dark-card);
    }
    
    /* More Menu */
    .more-menu {
    position: fixed;
    bottom: 70px;
    left: 0;
    right: 0;
    background: white;
    border-radius: 16px 16px 0 0;
    box-shadow: 0 -5px 15px rgba(0,0,0,0.1);
    z-index: 99;
    display: none;
    padding: 20px;
    }
    
    .dark-mode .more-menu {
    background: var(--dark-card);
    }
    
    .more-menu-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 15px;
    }
    
    .more-menu-item {
    text-align: center;
    padding: 15px 5px;
    border-radius: 12px;
    background: rgba(0,0,0,0.03);
    cursor: pointer;
    transition: all 0.3s;
    }
    
    .dark-mode .more-menu-item {
    background: rgba(255,255,255,0.05);
    }
    
    .more-menu-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 10px rgba(0,0,0,0.05);
    }
    
    .more-menu-icon {
    font-size: 24px;
    margin-bottom: 8px;
    }
    
    /* Task Form */
    .task-form-container {
    display: none;
    padding: 20px;
    background: rgba(0,0,0,0.03);
    border-radius: 16px;
    margin-top: 20px;
    }
    
    .dark-mode .task-form-container {
    background: rgba(255,255,255,0.05);
    }
    
    /* Responsive Design */
    @media (max-width: 768px) {
    .banner {
    padding: 20px 15px;
    }
    
    .logo {
    font-size: 1.2rem;
    }
    
    .coin-display {
    padding: 5px 12px;
    font-size: 0.9rem;
    }
    
    .redeem-grid {
    grid-template-columns: 1fr;
    }
    
    .nav-icon {
    font-size: 18px;
    }
    
    .more-menu-grid {
    grid-template-columns: repeat(3, 1fr);
    }
    }
    
    @media (max-width: 576px) {
    .header {
    padding: 12px 15px;
    }
    
    .logo-text {
    display: none;
    }
    
    .coin-display span {
    display: none;
    }
    
    .nav-item {
    font-size: 10px;
    }
    
    .nav-icon {
    font-size: 16px;
    }
    
    .banner h2 {
    font-size: 1.4rem;
    }
    
    .more-menu-grid {
    grid-template-columns: repeat(2, 1fr);
    }
    }
    
    /* Calendar */
    .calendar {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    margin: 20px 0;
    }
    
    .calendar-day {
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    background: rgba(0,0,0,0.03);
    font-weight: 600;
    position: relative;
    }
    
    .dark-mode .calendar-day {
    background: rgba(255,255,255,0.05);
    }
    
    .calendar-day.claimed:after {
    content: "âœ“";
    position: absolute;
    top: 2px;
    right: 2px;
    font-size: 10px;
    color: var(--success);
    }
    
    .calendar-day.active {
    background: var(--success);
    color: white;
    }
    
    .calendar-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 8px;
    margin-bottom: 10px;
    text-align: center;
    font-size: 0.85rem;
    opacity: 0.7;
    }
    
    /* Avatar */
    .avatar {
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: var(--bg-gradient);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: bold;
    margin: 0 auto 15px;
    }
    
    .dark-mode .avatar {
    background: linear-gradient(135deg, #4a1b8c 0%, #1a4fb3 100%);
    }
    
    /* Chart container */
    .chart-container {
    height: 250px;
    margin-top: 20px;
    }
    </style>
    </head>
    <body>
    <div class="app-container">
    <!-- Header -->
    <div class="header">
    <div class="logo">
    <div class="logo-icon">
    <i class="fas fa-gem"></i>
    </div>
    <span class="logo-text">PortaFlux</span>
    </div>
    
    <div class="header-controls">
    <div class="coin-display">
    <i class="fas fa-coins"></i>
    <span id="coinBalance">1,250</span> Laur
    </div>
    
    <div class="notification-icon" id="notificationIcon">
    <i class="fas fa-bell"></i>
    <span class="notification-badge">3</span>
    </div>
    
    <div class="dark-switch" id="darkModeToggle">
    <i class="fas fa-moon"></i>
    </div>
    </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content">
    <!-- Home Page -->
    <div id="homePage" class="page active">
    <div class="banner">
    <h2>Earn Laur Coins, Unlock Premium Access!</h2>
    <p class="mb-4">Complete tasks and get rewarded with exclusive benefits</p>
    <button class="btn btn-light btn-lg" id="startEarningBtn">Start Earning Now</button>
    </div>
    
    <div class="row">
    <div class="col-md-4 mb-4">
    <div class="card text-center p-4 h-100">
    <i class="fas fa-tasks fa-3x mb-3 text-primary"></i>
    <h5>Task Wall</h5>
    <p>Complete offers and earn coins</p>
    </div>
    </div>
    <div class="col-md-4 mb-4">
    <div class="card text-center p-4 h-100">
    <i class="fas fa-trophy fa-3x mb-3 text-warning"></i>
    <h5>Leaderboard</h5>
    <p>Compete with other users</p>
    </div>
    </div>
    <div class="col-md-4 mb-4">
    <div class="card text-center p-4 h-100">
    <i class="fas fa-gift fa-3x mb-3 text-success"></i>
    <h5>Rewards Store</h5>
    <p>Redeem your coins</p>
    </div>
    </div>
    </div>
    
    <div class="card mb-4">
    <div class="card-body">
    <h5 class="card-title">Daily Motivation</h5>
    <div id="motivationQuote" class="text-center p-3">
    <i class="fas fa-spinner fa-spin"></i> Loading quote...
    </div>
    </div>
    </div>
    
    <div class="card">
    <div class="card-body">
    <h5 class="card-title">Quick Actions</h5>
    <div class="d-flex justify-content-around flex-wrap">
    <button class="btn btn-outline-primary mb-2">
    <i class="fas fa-download me-2"></i> Install App
    </button>
    <button class="btn btn-outline-success mb-2">
    <i class="fas fa-share-alt me-2"></i> Invite Friends
    </button>
    <button class="btn btn-outline-info mb-2">
    <i class="fas fa-check-circle me-2"></i> Daily Check-in
    </button>
    <button class="btn btn-outline-warning mb-2">
    <i class="fab fa-instagram me-2"></i> Follow Us
    </button>
    </div>
    </div>
    </div>
    </div>
    
    <!-- Task Wall Page -->
    <div id="tasksPage" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
    <h4>Available Tasks</h4>
    <div class="dropdown">
    <button class="btn btn-outline-secondary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown">
    <i class="fas fa-filter me-2"></i>Filter
    </button>
    <ul class="dropdown-menu">
    <li><a class="dropdown-item filter-option" href="#" data-filter="all">All Tasks</a></li>
    <li><a class="dropdown-item filter-option" href="#" data-filter="watch">Watch Ads</a></li>
    <li><a class="dropdown-item filter-option" href="#" data-filter="install">Install Apps</a></li>
    <li><a class="dropdown-item filter-option" href="#" data-filter="survey">Surveys</a></li>
    <li><a class="dropdown-item filter-option" href="#" data-filter="video">Videos</a></li>
    </ul>
    </div>
    </div>
    
    <div class="card mb-4">
    <div class="card-header">
    <h5 class="mb-0">Featured Tasks</h5>
    </div>
    <div class="card-body">
    <div class="row" id="featuredTasks">
    <!-- Featured tasks will be loaded here -->
    <div class="text-center py-5">
    <i class="fas fa-spinner fa-spin fa-2x"></i>
    <p>Loading featured tasks...</p>
    </div>
    </div>
    </div>
    </div>
    
    <h5 class="mb-3">All Tasks</h5>
    <div class="list-group" id="allTasks">
    <!-- All tasks will be loaded here -->
    <div class="text-center py-4">
    <i class="fas fa-spinner fa-spin"></i> Loading tasks...
    </div>
    </div>
    </div>
    
    <!-- Wallet Page -->
    <div id="walletPage" class="page">
    <div class="wallet-balance">
    <h3>My Wallet</h3>
    <div class="balance-amount">
    <i class="fas fa-coins"></i> <span id="walletBalance">1,250</span> Laur
    </div>
    <p>Available Balance</p>
    </div>
    
    <div class="card mb-4">
    <div class="card-body">
    <h5 class="card-title">Premium Progress</h5>
    <div class="d-flex justify-content-between mb-2">
    <span>Premium Level: Silver</span>
    <span>600 / 1000 coins</span>
    </div>
    <div class="progress-container">
    <div class="progress-bar" style="width: 60%"></div>
    </div>
    <p class="mt-2 text-center">Earn 400 more coins to unlock Gold Premium</p>
    </div>
    </div>
    
    <h5 class="mb-3">Transaction History</h5>
    <div class="card">
    <div class="card-body p-0">
    <div class="list-group list-group-flush" id="transactionHistory">
    <!-- Transactions will be loaded here -->
    <div class="text-center py-4">
    <i class="fas fa-spinner fa-spin"></i> Loading transactions...
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- Rewards & Redemption Page -->
    <div id="redeemPage" class="page">
    <div class="text-center mb-4">
    <h3>Redeem Your Laur Coins</h3>
    <p class="text-muted">Exchange coins for premium subscriptions</p>
    </div>
    
    <div class="redeem-grid" id="rewardsContainer">
    <!-- Rewards will be loaded here -->
    <div class="text-center py-5">
    <i class="fas fa-spinner fa-spin fa-2x"></i>
    <p>Loading rewards...</p>
    </div>
    </div>
    </div>
    
    <!-- Referral Center Page -->
    <div id="referralPage" class="page">
    <div class="text-center mb-4">
    <h3>Referral Center</h3>
    <p>Invite friends and earn bonus coins</p>
    </div>
    
    <div class="card mb-4">
    <div class="card-body">
    <div class="d-flex">
    <input type="text" class="form-control me-2" id="referralLink" value="https://portaflux.netlify.app/ref/pexoria-5A8F3" readonly>
    <button class="btn btn-primary" id="copyReferralBtn">
    <i class="fas fa-copy"></i>
    </button>
    </div>
    </div>
    </div>
    
    <div class="row mb-4">
    <div class="col-md-6 mb-3">
    <div class="card h-100">
    <div class="card-body text-center">
    <h5>Your Referrals</h5>
    <div class="display-3 text-primary">0</div>
    <p>Friends joined</p>
    </div>
    </div>
    </div>
    <div class="col-md-6 mb-3">
    <div class="card h-100">
    <div class="card-body text-center">
    <h5>Referral Earnings</h5>
    <div class="display-3 text-success">0</div>
    <p>Laur earned</p>
    </div>
    </div>
    </div>
    </div>
    
    <div class="card">
    <div class="card-header">
    <h5 class="mb-0">Referral Rewards</h5>
    </div>
    <div class="card-body">
    <ul class="list-group list-group-flush">
    <li class="list-group-item d-flex justify-content-between align-items-center">
    <div>
    <i class="fas fa-user-plus me-2 text-primary"></i>
    5 friends joined
    </div>
    <span class="badge bg-success">+50 Laur</span>
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
    <div>
    <i class="fas fa-user-plus me-2 text-primary"></i>
    10 friends joined
    </div>
    <span class="badge bg-success">+120 Laur</span>
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
    <div>
    <i class="fas fa-user-plus me-2 text-primary"></i>
    25 friends joined
    </div>
    <span class="badge bg-success">+300 Laur</span>
    </li>
    <li class="list-group-item d-flex justify-content-between align-items-center">
    <div>
    <i class="fas fa-user-plus me-2 text-primary"></i>
    100 friends joined
    </div>
    <span class="badge bg-success">+1500 Laur</span>
    </li>
    </ul>
    </div>
    </div>
    </div>
    
    <!-- Leaderboard Page -->
    <div id="leaderboardPage" class="page">
    <div class="text-center mb-4">
    <h3>Top Earners</h3>
    <p>Compete with other users to earn more coins</p>
    </div>
    
    <div class="d-flex justify-content-center mb-4">
    <div class="btn-group">
    <button class="btn btn-outline-primary active" data-period="daily">Daily</button>
    <button class="btn btn-outline-primary" data-period="weekly">Weekly</button>
    <button class="btn btn-outline-primary" data-period="monthly">Monthly</button>
    </div>
    </div>
    
    <div class="card">
    <div class="card-body">
    <div id="leaderboardList">
    <!-- Leaderboard will be loaded here -->
    <div class="text-center py-4">
    <i class="fas fa-spinner fa-spin"></i> Loading leaderboard...
    </div>
    </div>
    </div>
    </div>
    
    <div class="text-center mt-4">
    <button class="btn btn-primary">
    <i class="fas fa-trophy me-2"></i> View Your Position
    </button>
    </div>
    </div>
    
    <!-- Daily Rewards Page -->
    <div id="rewardsPage" class="page">
    <div class="text-center mb-4">
    <h3>Daily Rewards & Bonuses</h3>
    <p>Claim your daily rewards and spin the wheel for bonuses</p>
    </div>
    
    <div class="card mb-4">
    <div class="card-body">
    <h5 class="card-title text-center mb-4">Daily Check-in</h5>
    
    <div class="calendar-header">
    <div>Mon</div>
    <div>Tue</div>
    <div>Wed</div>
    <div>Thu</div>
    <div>Fri</div>
    <div>Sat</div>
    <div>Sun</div>
    </div>
    
    <div class="calendar">
    <div class="calendar-day claimed">1</div>
    <div class="calendar-day claimed">2</div>
    <div class="calendar-day claimed">3</div>
    <div class="calendar-day active">4</div>
    <div class="calendar-day">5</div>
    <div class="calendar-day">6</div>
    <div class="calendar-day">7</div>
    </div>
    
    <div class="text-center mt-3">
    <p class="text-success"><strong>Current Streak: 4 days</strong></p>
        <button class="btn btn-success" id="claimDailyBtn">
        <i class="fas fa-check-circle me-2"></i> Claim Today's Reward (50 Laur)
        </button>
        </div>
    </div>
    </div>
    <!-- Custom Notification Toast -->
    <div class="toast-container position-fixed bottom-0 end-0 p-3">
    <div id="customToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
    <div class="toast-header bg-primary text-white">
    <strong class="me-auto" id="toastTitle">Notification</strong>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast"></button>
    </div>
    <div class="toast-body" id="toastMessage"></div>
    </div>
    </div>
    <div class="card">
    <div class="card-body text-center">
    <h5 class="card-title mb-4">Spin the Wheel</h5>
    <div class="wheel-container">
    <div class="wheel">
    <div class="wheel-segment" style="transform: rotate(0deg); background: #ff6b6b;">10</div>
    <div class="wheel-segment" style="transform: rotate(45deg); background: #48dbfb;">20</div>
    <div class="wheel-segment" style="transform: rotate(90deg); background: #1dd1a1;">50</div>
    <div class="wheel-segment" style="transform: rotate(135deg); background: #feca57;">100</div>
    <div class="wheel-segment" style="transform: rotate(180deg); background: #ff9ff3;">5</div>
    <div class="wheel-segment" style="transform: rotate(225deg); background: #54a0ff;">25</div>
    <div class="wheel-segment" style="transform: rotate(270deg); background: #00d2d3;">75</div>
    <div class="wheel-segment" style="transform: rotate(315deg); background: #5f27cd;">15</div>
    <div class="wheel-center" id="spinButton">
    SPIN
    </div>
    <div class="wheel-pointer">
    <i class="fas fa-caret-down fa-2x text-danger"></i>
    </div>
    </div>
    <div class="spins-counter">
    Spins left: <span id="spinsLeft">3</span> (Resets in 4 hours)
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- Task Feed Page -->
    <div id="feedPage" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
    <h4>Activity Feed</h4>
    <button class="btn btn-outline-primary" id="refreshFeedBtn">
    <i class="fas fa-sync-alt me-2"></i> Refresh
    </button>
    </div>
    
    <div class="card mb-4">
    <div class="card-body">
    <div class="feed-item">
    <div class="feed-avatar">AJ</div>
    <div class="feed-content">
    <h5>Alex Johnson completed "Install Shopping App"</h5>
    <p class="text-muted">Earned 80 Laur - 10 minutes ago</p>
    <div class="feed-actions">
    <button class="btn btn-sm btn-outline-primary">
    <i class="fas fa-thumbs-up me-1"></i> Like (24)
    </button>
    <button class="btn btn-sm btn-outline-secondary comment-toggle">
    <i class="fas fa-comment me-1"></i> Comment
    </button>
    </div>
    <div class="comment-section">
    <div class="comment-input">
    <input type="text" placeholder="Add a comment...">
    <button class="btn btn-sm btn-primary">Post</button>
    </div>
    </div>
    </div>
    </div>
    
    <div class="feed-item">
    <div class="feed-avatar">SW</div>
    <div class="feed-content">
    <h5>Sarah Williams reached Level 5</h5>
    <p class="text-muted">Unlocked Premium Badge - 25 minutes ago</p>
    <div class="feed-actions">
    <button class="btn btn-sm btn-outline-primary">
    <i class="fas fa-thumbs-up me-1"></i> Like (42)
    </button>
    <button class="btn btn-sm btn-outline-secondary comment-toggle">
    <i class="fas fa-comment me-1"></i> Comment
    </button>
    </div>
    <div class="comment-section">
    <div class="comment-input">
    <input type="text" placeholder="Add a comment...">
    <button class="btn btn-sm btn-primary">Post</button>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- Chat System -->
    <div class="chat-container">
    <div class="chat-header">
    Community Chat
    </div>
    <div class="chat-messages" id="chatMessages">
    <div class="chat-message received">
    <div class="message-content">
    Welcome to the PortaFlux community chat!
    </div>
    </div>
    <div class="chat-message received">
    <div class="message-content">
    How are you earning coins today?
    </div>
    </div>
    <div class="chat-message sent">
    <div class="message-content">
    Just completed a survey for 25 Laur!
    </div>
    </div>
    </div>
    <div class="chat-input">
    <input type="text" id="chatInput" placeholder="Type your message...">
    <button class="btn btn-primary" id="sendChatBtn">
    <i class="fas fa-paper-plane"></i>
    </button>
    </div>
    </div>
    </div>
    
    <!-- Account Page -->
    <div id="accountPage" class="page">
    <div class="text-center mb-4">
    <div class="avatar mx-auto mb-3">
    <span id="userInitial">U</span>
    </div>
    <h4 id="username">User#Pexoria</h4>
    <p class="text-muted" id="userLocation">Detecting location...</p>
    </div>
    
    <div class="card mb-4">
    <div class="card-body">
    <h5 class="card-title">Account Stats</h5>
    <div class="row text-center">
    <div class="col-4">
    <div class="display-6" id="accountCoins">1,250</div>
    <small>Laur</small>
    </div>
    <div class="col-4">
    <div class="display-6" id="accountTasks">0</div>
    <small>Tasks</small>
    </div>
    <div class="col-4">
    <div class="display-6" id="accountRewards">0</div>
    <small>Rewards</small>
    </div>
    </div>
    </div>
    </div>
    
    <div class="card mb-4">
    <div class="card-body">
    <h5 class="card-title mb-3">Recent Activity</h5>
    <div class="list-group" id="recentActivity">
    <!-- Activities will be loaded here -->
    <div class="list-group-item text-center py-3">
    <i class="fas fa-spinner fa-spin me-2"></i> Loading activities...
    </div>
    </div>
    </div>
    </div>
    
    <div class="card">
    <div class="card-body">
    <h5 class="card-title mb-3">Account Settings</h5>
    <div class="list-group">
    <a href="#" class="list-group-item list-group-item-action">
    <i class="fas fa-bell me-3"></i> Notification Settings
    </a>
    <a href="#" class="list-group-item list-group-item-action">
    <i class="fas fa-lock me-3"></i> Security
    </a>
    <a href="#" class="list-group-item list-group-item-action">
    <i class="fas fa-question-circle me-3"></i> Help & Support
    </a>
    <a href="#" class="list-group-item list-group-item-action">
    <i class="fas fa-file-alt me-3"></i> Terms & Conditions
    </a>
    </div>
    </div>
    </div>
    </div>
    
    <!-- Notification Center -->
    <div id="notificationsPage" class="page">
    <div class="d-flex justify-content-between align-items-center mb-4">
    <h4>Notifications</h4>
    <button class="btn btn-sm btn-outline-secondary" id="markAsReadBtn">
    <i class="fas fa-check me-1"></i> Mark all as read
    </button>
    </div>
    
    <div class="card">
    <div class="card-body p-0">
    <div class="list-group list-group-flush" id="notificationsContainer">
    <div class="list-group-item">
    <div class="d-flex">
    <div class="flex-shrink-0 me-3">
    <i class="fas fa-gift text-success fa-lg"></i>
    </div>
    <div class="flex-grow-1">
    <h6 class="mb-1">Daily Reward Available</h6>
    <p>Claim your 50 Laur daily bonus</p>
    <small class="text-muted">10 minutes ago</small>
    </div>
    </div>
    </div>
    <div class="list-group-item">
    <div class="d-flex">
    <div class="flex-shrink-0 me-3">
    <i class="fas fa-trophy text-warning fa-lg"></i>
    </div>
    <div class="flex-grow-1">
    <h6 class="mb-1">New Achievement Unlocked</h6>
    <p>You've reached Silver status</p>
    <small class="text-muted">2 hours ago</small>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- Admin Panel -->
    <div id="adminPage" class="page">
    <div class="admin-login" id="adminLogin">
    <div class="login-box">
    <h3 class="text-center mb-4">Admin Login</h3>
    <div class="mb-3">
    <label class="form-label">Admin Token</label>
    <input type="password" class="form-control" id="adminToken" placeholder="Enter security token">
    </div>
    <button class="btn btn-primary w-100" id="adminLoginBtn">
    <i class="fas fa-lock me-2"></i> Access Admin Panel
    </button>
    </div>
    </div>
    
    <div class="d-flex justify-content-between align-items-center mb-4">
    <h3>Admin Dashboard</h3>
    <button class="btn btn-sm btn-outline-danger" id="adminLogoutBtn">
    <i class="fas fa-sign-out-alt me-1"></i> Logout
    </button>
    </div>
    
    <ul class="nav nav-tabs mb-4" id="adminTabs">
    <li class="nav-item">
    <a class="nav-link active" data-bs-toggle="tab" href="#tasksTab">Tasks</a>
    </li>
    <li class="nav-item">
    <a class="nav-link" data-bs-toggle="tab" href="#usersTab">Users</a>
    </li>
    <li class="nav-item">
    <a class="nav-link" data-bs-toggle="tab" href="#rewardsTab">Rewards</a>
    </li>
    <li class="nav-item">
    <a class="nav-link" data-bs-toggle="tab" href="#analyticsTab">Analytics</a>
    </li>
    </ul>
    
    <div class="tab-content">
    <div class="tab-pane fade show active" id="tasksTab">
    <div class="card mb-4">
    <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">Manage Tasks</h5>
    <button class="btn btn-primary" id="addTaskBtn">
    <i class="fas fa-plus me-2"></i> Add New Task
    </button>
    </div>
    <div class="card-body">
    <!-- Task Form Container -->
    <div class="task-form-container" id="taskFormContainer">
    <h5>Create New Task</h5>
    <div class="mb-3">
    <label class="form-label">Task Title</label>
    <input type="text" class="form-control" id="taskTitle" placeholder="Enter task title">
    </div>
    <div class="mb-3">
    <label class="form-label">Task Type</label>
    <select class="form-select" id="taskType">
    <option value="watch">Watch Ads</option>
    <option value="install">Install Apps</option>
    <option value="survey">Survey</option>
    <option value="video">Video</option>
    </select>
    </div>
    <div class="mb-3">
    <label class="form-label">Coins Reward</label>
    <input type="number" class="form-control" id="taskCoins" placeholder="Enter coins amount">
    </div>
    <div class="mb-3">
    <label class="form-label">Task URL</label>
    <input type="url" class="form-control" id="taskUrl" placeholder="Enter task URL">
    </div>
    <div class="mb-3">
    <label class="form-label">Description</label>
    <textarea class="form-control" id="taskDescription" rows="2" placeholder="Enter task description"></textarea>
    </div>
    <div class="mb-3 form-check">
    <input type="checkbox" class="form-check-input" id="taskFeatured">
    <label class="form-check-label" for="taskFeatured">Featured Task</label>
    </div>
    <div class="d-flex justify-content-end gap-2">
    <button class="btn btn-secondary" id="cancelTaskBtn">Cancel</button>
    <button class="btn btn-primary" id="saveTaskBtn">Save Task</button>
    </div>
    </div>
    
    <div class="table-responsive">
    <table class="table table-hover">
    <thead>
    <tr>
    <th>Title</th>
    <th>Type</th>
    <th>Reward</th>
    <th>Status</th>
    <th>Actions</th>
    </tr>
    </thead>
    <tbody id="adminTasksTable">
    <!-- Admin tasks will be loaded here -->
    <tr>
    <td colspan="5" class="text-center py-4">
    <i class="fas fa-spinner fa-spin"></i> Loading tasks...
    </td>
    </tr>
    </tbody>
    </table>
    </div>
    </div>
    </div>
    </div>
    
    <div class="tab-pane fade" id="usersTab">
    <div class="card">
    <div class="card-header">
    <h5 class="mb-0">User Management</h5>
    </div>
    <div class="card-body">
    <div class="table-responsive">
    <table class="table table-hover">
    <thead>
    <tr>
    <th>User ID</th>
    <th>Laur</th>
    <th>Tasks</th>
    <th>Referrals</th>
    <th>Status</th>
    <th>Actions</th>
    </tr>
    </thead>
    <tbody id="usersTableBody">
    <tr>
    <td colspan="6" class="text-center py-4">
    <i class="fas fa-spinner fa-spin"></i> Loading users...
    </td>
    </tr>
    </tbody>
    </table>
    </div>
    </div>
    </div>
    </div>
    
    <div class="tab-pane fade" id="rewardsTab">
    <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
    <h5 class="mb-0">Reward Management</h5>
    <button class="btn btn-primary" id="addRewardBtn">
    <i class="fas fa-plus me-2"></i> Add New Reward
    </button>
    </div>
    <div class="card-body">
    <!-- Reward Form Container -->
    <div class="task-form-container" id="rewardFormContainer">
    <h5>Create New Reward</h5>
    <div class="mb-3">
    <label class="form-label">Reward Name</label>
    <input type="text" class="form-control" id="rewardName" placeholder="Enter reward name">
    </div>
    <div class="mb-3">
    <label class="form-label">Coins Required</label>
    <input type="number" class="form-control" id="rewardCoins" placeholder="Enter coins amount">
    </div>
    <div class="mb-3">
    <label class="form-label">Duration</label>
    <input type="text" class="form-control" id="rewardDuration" placeholder="e.g., 7 days">
    </div>
    <div class="d-flex justify-content-end gap-2">
    <button class="btn btn-secondary" id="cancelRewardBtn">Cancel</button>
    <button class="btn btn-primary" id="saveRewardBtn">Save Reward</button>
    </div>
    </div>
    
    <div class="table-responsive">
    <table class="table table-hover">
    <thead>
    <tr>
    <th>Name</th>
    <th>Price</th>
    <th>Duration</th>
    <th>Actions</th>
    </tr>
    </thead>
    <tbody id="rewardsTableBody">
    <tr>
    <td colspan="4" class="text-center py-4">
    <i class="fas fa-spinner fa-spin"></i> Loading rewards...
    </td>
    </tr>
    </tbody>
    </table>
    </div>
    </div>
    </div>
    </div>
    
    <div class="tab-pane fade" id="analyticsTab">
    <div class="card">
    <div class="card-header">
    <h5 class="mb-0">Platform Analytics</h5>
    </div>
    <div class="card-body">
    <div class="row">
    <div class="col-md-3 mb-3">
    <div class="card">
    <div class="card-body text-center">
    <div class="display-4" id="totalUsers">0</div>
    <div>Total Users</div>
    </div>
    </div>
    </div>
    <div class="col-md-3 mb-3">
    <div class="card">
    <div class="card-body text-center">
    <div class="display-4" id="totalTasks">0</div>
    <div>Tasks Completed</div>
    </div>
    </div>
    </div>
    <div class="col-md-3 mb-3">
    <div class="card">
    <div class="card-body text-center">
    <div class="display-4" id="totalCoins">0</div>
    <div>Laur Earned</div>
    </div>
    </div>
    </div>
    <div class="col-md-3 mb-3">
    <div class="card">
    <div class="card-body text-center">
    <div class="display-4" id="totalRewards">0</div>
    <div>Rewards Redeemed</div>
    </div>
    </div>
    </div>
    </div>
    
    <div class="card mt-4">
    <div class="card-header">
    <h5>Activity Trends</h5>
    </div>
    <div class="card-body">
    <div class="chart-container">
    <canvas id="activityChart"></canvas>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- Bottom Navigation -->
    <div class="nav-bottom">
    <div class="nav-item active" data-page="homePage">
    <i class="fas fa-home nav-icon"></i>
    Home
    </div>
    <div class="nav-item" data-page="tasksPage">
    <i class="fas fa-tasks nav-icon"></i>
    Tasks
    </div>
    <div class="nav-item" data-page="walletPage">
    <i class="fas fa-wallet nav-icon"></i>
    Wallet
    </div>
    <div class="nav-item" data-page="redeemPage">
    <i class="fas fa-gift nav-icon"></i>
    Rewards
    </div>
    <div class="nav-item" id="moreMenuBtn">
    <i class="fas fa-ellipsis-h nav-icon"></i>
    More
    </div>
    </div>
    
    <!-- More Menu -->
    <div class="more-menu" id="moreMenu">
    <div class="more-menu-grid">
    <div class="more-menu-item" data-page="referralPage">
    <div class="more-menu-icon">
    <i class="fas fa-user-friends"></i>
    </div>
    <div>Referral</div>
    </div>
    <div class="more-menu-item" data-page="leaderboardPage">
    <div class="more-menu-icon">
    <i class="fas fa-trophy"></i>
    </div>
    <div>Leaderboard</div>
    </div>
    <div class="more-menu-item" data-page="rewardsPage">
    <div class="more-menu-icon">
    <i class="fas fa-calendar-check"></i>
    </div>
    <div>Daily Rewards</div>
    </div>
    <div class="more-menu-item" data-page="feedPage">
    <div class="more-menu-icon">
    <i class="fas fa-rss"></i>
    </div>
    <div>Activity Feed</div>
    </div>
    <div class="more-menu-item" data-page="accountPage">
    <div class="more-menu-icon">
    <i class="fas fa-user"></i>
    </div>
    <div>Account</div>
    </div>
    <div class="more-menu-item" data-page="notificationsPage">
    <div class="more-menu-icon">
    <i class="fas fa-bell"></i>
    </div>
    <div>Notifications</div>
    </div>
    <div class="more-menu-item" data-page="adminPage">
    <div class="more-menu-icon">
    <i class="fas fa-cog"></i>
    </div>
    <div>Admin</div>
    </div>
    </div>
    </div>
    </div>
    
    <!-- Modals -->
    <div class="modal fade" id="taskModal" tabindex="-1">
    <div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header">
    <h5 class="modal-title">Task Verification</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
    </div>
    <div class="modal-body">
    <div class="text-center">
    <i class="fas fa-spinner fa-spin fa-3x mb-3"></i>
    <h5>Verifying task completion...</h5>
    <p>Please wait while we verify your activity</p>
    <div class="progress mt-3" style="height: 8px;">
    <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%"></div>
    </div>
    </div>
    </div>
    </div>
    </div>
    </div>
    
    <div class="modal fade" id="rewardModal" tabindex="-1">
    <div class="modal-dialog">
    <div class="modal-content">
    <div class="modal-header">
    <h5 class="modal-title">Redemption Successful!</h5>
    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
    </div>
    <div class="modal-body text-center">
    <i class="fas fa-gift fa-4x text-success mb-3"></i>
    <h4>Premium Subscription Activated</h4>
    <p class="lead mt-3">Access Token: <code id="rewardToken">Laur-TOKEN-5A8F3</code></p>
    <div class="alert alert-info mt-3">
    <i class="fas fa-info-circle me-2"></i> Use this token to access premium content
    </div>
    </div>
    <div class="modal-footer">
    <button class="btn btn-primary w-100" data-bs-dismiss="modal">Continue</button>
    </div>
    </div>
    </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@fingerprintjs/fingerprintjs@4/dist/fp.min.js"></script>
        <script>
        // Frontend Application (Complete Version - 1370+ lines)
        class App {
            constructor() {
                this.currentUser = null;
                this.editingTask = null;
                this.editingReward = null;
                this.adminTimeout = null;
                this.init();
            }
            
            init() {
                this.handleReferralUrl();  // Must be first!
                this.initUser();
                this.initUI();
                this.initEventListeners();
            }
            
                  // Update initUser function
async initUser() {
  try {
    const userId = localStorage.getItem('portaflux_userId');
    const referralCode = localStorage.getItem('referralCode');

      // Generate device ID
    let deviceId = localStorage.getItem('deviceId');
    if (!deviceId) {
      deviceId = Math.random().toString(36).substring(2, 10);
      localStorage.setItem('deviceId', deviceId);
    }
      
    if (userId) {
      const response = await fetch(`/.netlify/functions/getUser?userId=${userId}`);
      if (response.ok) {
        const user = await response.json();
        this.currentUser = {
          id: user.id,
          coins: user.coins || 0, // Ensure coins are defined
          tasksCompleted: user.tasksCompleted || 0,
          rewardsClaimed: user.rewardsClaimed || 0,
          referrals: user.referrals || 0
        };
        this.updateUserUI();
        return;
      }
    }

    // Register new user
    const registerResponse = await fetch('/.netlify/functions/registerUser', {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify({
          ...(referralCode ? { referralCode } : {}),
          deviceId: deviceId
        })   
    });
    
    if (!registerResponse.ok) {
      const errorText = await registerResponse.text();
      throw new Error(errorText || 'Registration failed');
    }
    
    const userData = await registerResponse.json();
    this.currentUser = {
      id: userData.id,
      coins: userData.coins || 1250, // Ensure coins are defined
      tasksCompleted: userData.tasksCompleted || 0,
      rewardsClaimed: userData.rewardsClaimed || 0,
      referrals: userData.referrals || 0
    };
    localStorage.setItem('portaflux_userId', userData.id);
    this.updateUserUI();
    // Clear referral code after successful registration
        localStorage.removeItem('referralCode');
        
  
  } catch (error) {
    console.error('User initialization error:', error);
    alert('Account initialization failed. Please refresh. ' + error.message);
  }
}
       updateUserUI() {
  if (!this.currentUser) return;
  
  // 1. KEEP USER INITIAL & USERNAME - Maintains avatar and profile display
  const userInitial = this.currentUser.id ? this.currentUser.id.charAt(0) : 'U';
  document.getElementById('userInitial').textContent = userInitial;
  
  // Keep full ID in username but make it readable
  const displayId = this.currentUser.id.length > 15 
    ? this.currentUser.id.substring(0, 15) + '...' 
    : this.currentUser.id;
  document.getElementById('username').textContent = `User#${displayId}`;

  // 2. FIXED REFERRAL LINK - Uses shortened version
  const parts = this.currentUser.id.split('-');
  const referralId = parts.length >= 3 
    ? `${parts[0]}-${parts[1]}` // "Pexoria-101149"
    : this.currentUser.id;
    
  document.getElementById('referralLink').value = 
      `https://portaflux.netlify.app/ref/${referralId}`;
  
  // 3. KEEP COIN BALANCES & STATS - Maintains wallet functionality
  this.updateCoinBalances();
  document.getElementById('accountCoins').textContent = (this.currentUser.coins || 0).toLocaleString();
  document.getElementById('accountTasks').textContent = this.currentUser.tasksCompleted || 0;
  document.getElementById('accountRewards').textContent = this.currentUser.rewardsClaimed || 0;
  
  // 4. KEEP LOCATION SERVICE - Maintains geolocation feature
  this.getUserLocation();
       }
            
       async getUserLocation() {
                try {
                    // First try browser geolocation
                    const position = await new Promise((resolve, reject) => {
                        navigator.geolocation.getCurrentPosition(resolve, reject, {
                            timeout: 5000,
                            maximumAge: 60000
                        });
                    });
                    
                    // Use coordinates to get location
                    const response = await fetch(`https://geocode.maps.co/reverse?lat=${position.coords.latitude}&lon=${position.coords.longitude}&format=json`);
                    const data = await response.json();
                    
                    // Extract location with fallbacks
                    const city = data.address.city || data.address.town || data.address.village || 'Unknown City';
                    const country = data.address.country || 'Unknown Country';
                    
                    document.getElementById('userLocation').textContent = `Location: ${city}, ${country}`;
                } catch (error) {
                    console.log('Geolocation failed, using IP-based location');
                    try {
                        // IP-based fallback
                        const ipRes = await fetch('https://ipapi.co/json/');
                        const ipData = await ipRes.json();
                        
                        // Use country_name if available
                        const countryName = ipData.country_name || ipData.country || 'Unknown Country';
                        document.getElementById('userLocation').textContent = `Location: ${ipData.city}, ${countryName}`;
                    } catch (ipError) {
                        console.log('IP-based location failed');
                        document.getElementById('userLocation').textContent = 'Location: Unknown';
                    }
                }
            }
            // Add this new method to the App class
handleReferralUrl() {
    const path = window.location.pathname;
    // Check if URL is a referral link
    if (path.startsWith('/ref/')) {
        const referralCode = path.split('/ref/')[1];
        if (referralCode) {
            localStorage.setItem('referralCode', referralCode);
            // Clean URL after capturing code
            window.history.replaceState({}, document.title, '/');
        }
    }
        }
        
            async initUI() {
                await this.loadTasks();
                await this.loadRewards();
                await this.loadTransactions();
                await this.loadUsers();
                await this.loadAnalytics();
                await this.updateDailyCalendar();
                this.initMotivationalQuotes();
                this.initSpinWheel();
                this.updateAccountStats();
                this.initActivityChart();
                this.loadUserActivities();
                this.loadReferralData();
                // Initialize calendar
                if (this.currentUser?.id) {
                await this.updateDailyCalendar();
                }
                
            }
            
          
            // Update updateAccountStats function
async updateAccountStats() {
  if (!this.currentUser?.id) return;
  
  try {
    const response = await fetch(`/.netlify/functions/getUser?userId=${this.currentUser.id}`);
    if (response.ok) {
      const userData = await response.json();
      this.currentUser = {
        id: userData.id,
        coins: userData.coins || 0,
        tasksCompleted: userData.tasksCompleted || 0,
        rewardsClaimed: userData.rewardsClaimed || 0,
        referrals: userData.referrals || 0
      };
      // Use safe access
      document.getElementById('accountCoins').textContent = (userData.coins || 0).toLocaleString();
      document.getElementById('accountTasks').textContent = userData.tasksCompleted || 0;
      document.getElementById('accountRewards').textContent = userData.rewardsClaimed || 0;
    }
  } catch (error) {
    console.error('Error updating account stats:', error);
  }
}            
            async loadTasks() {
                try {
                    const response = await fetch('/.netlify/functions/getTasks');
                    const tasks = await response.json();
                    
                    const featuredTasksContainer = document.getElementById('featuredTasks');
                    const allTasksContainer = document.getElementById('allTasks');
                    const adminTasksTable = document.getElementById('adminTasksTable');
                    
                    featuredTasksContainer.innerHTML = '';
                    allTasksContainer.innerHTML = '';
                    adminTasksTable.innerHTML = '';
                    
                    // Featured tasks
                    tasks.filter(task => task.featured && task.active).forEach(task => {
                        const taskCard = `
                            <div class="col-md-6 mb-3">
                                <div class="card offer-card h-100">
                                    ${task.active ? '' : '<div class="offer-badge">Inactive</div>'}
                                    <div class="card-body">
                                        <div class="d-flex h-100 flex-column">
                                            <h5 class="task-title">${task.title}</h5>
                                            <p class="flex-grow-1">${task.description}</p>
                                            <div class="task-meta">
                                                <div class="task-coins">
                                                    <i class="fas fa-coins"></i> ${task.coins} Laur
                                                </div>
                                                <button class="btn btn-sm btn-primary start-task" data-id="${task.id}">
                                                    Start
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        `;
                        featuredTasksContainer.innerHTML += taskCard;
                    });
                    
                    // All tasks
                    tasks.forEach(task => {
                        const taskItem = `
                            <div class="list-group-item">
                                <div class="d-flex justify-content-between align-items-center">
                                    <div>
                                        <h6 class="mb-1">${task.title}</h6>
                                        <small>${task.description}</small>
                                    </div>
                                    <div>
                                        <span class="badge bg-warning me-2">${task.coins} Laur</span>
                                        <button class="btn btn-sm btn-outline-primary start-task" data-id="${task.id}">Start</button>
                                    </div>
                                </div>
                            </div>
                        `;
                        allTasksContainer.innerHTML += taskItem;
                    });
                    
                    // Admin tasks
                    tasks.forEach(task => {
                        const taskRow = `
                            <tr>
                                <td>${task.title}</td>
                                <td>${task.type.charAt(0).toUpperCase() + task.type.slice(1)}</td>
                                <td>${task.coins} Laur</td>
                                <td>
                                    <span class="badge ${task.active ? 'bg-success' : 'bg-secondary'}">
                                        ${task.active ? 'Active' : 'Inactive'}
                                    </span>
                                </td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary edit-task" data-id="${task.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger delete-task" data-id="${task.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                    <button class="btn btn-sm ${task.active ? 'btn-outline-warning' : 'btn-outline-success'} toggle-task" data-id="${task.id}">
                                        <i class="fas ${task.active ? 'fa-toggle-on' : 'fa-toggle-off'}"></i>
                                    </button>
                                </td>
                            </tr>
                        `;
                        adminTasksTable.innerHTML += taskRow;
                    });
                } catch (error) {
                    console.error('Error loading tasks:', error);
                    const featuredTasksContainer = document.getElementById('featuredTasks');
                    featuredTasksContainer.innerHTML = `
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            Failed to load tasks. Please try again later.
                        </div>
                    `;
                }
            }
            
            async loadRewards() {
                try {
                    const response = await fetch('/.netlify/functions/getRewards');
                    const rewards = await response.json();
                    
                    const rewardsContainer = document.getElementById('rewardsContainer');
                    const rewardsTableBody = document.getElementById('rewardsTableBody');
                    
                    rewardsContainer.innerHTML = '';
                    rewardsTableBody.innerHTML = '';
                    
                    if (rewards.length === 0) {
                        rewardsContainer.innerHTML = `
                            <div class="alert alert-warning text-center w-100">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                No rewards available. Check back later!
                            </div>
                        `;
                    } else {
                        rewards.forEach(reward => {
                            const rewardCard = `
                                <div class="redeem-card">
                                    <div class="redeem-header">
                                        ${reward.name}
                                    </div>
                                    <div class="redeem-body">
                                        <div class="redeem-price">
                                            <i class="fas fa-coins"></i> ${reward.coins.toLocaleString()} Laur
                                        </div>
                                        <div class="text-muted mb-3">${reward.duration} access</div>
                                        <ul class="redeem-features">
                                            <li>Ad-free streaming</li>
                                            <li>4K Ultra HD quality</li>
                                            <li>Multiple device access</li>
                                            <li>Exclusive content</li>
                                        </ul>
                                        <button class="btn btn-primary w-100 redeem-btn" 
                                            data-id="${reward.id}" 
                                            data-coins="${reward.coins}">
                                            Redeem Now
                                        </button>
                                    </div>
                                </div>
                            `;
                            rewardsContainer.innerHTML += rewardCard;
                        });
                    }
                    
                    // Admin rewards table
                    rewards.forEach(reward => {
                        const rewardRow = `
                            <tr>
                                <td>${reward.name}</td>
                                <td>${reward.coins} Laur</td>
                                <td>${reward.duration}</td>
                                <td>
                                    <button class="btn btn-sm btn-outline-primary edit-reward" data-id="${reward.id}">
                                        <i class="fas fa-edit"></i>
                                    </button>
                                    <button class="btn btn-sm btn-outline-danger delete-reward" data-id="${reward.id}">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                        `;
                        rewardsTableBody.innerHTML += rewardRow;
                    });
                    
                } catch (error) {
                    console.error('Error loading rewards:', error);
                    const rewardsContainer = document.getElementById('rewardsContainer');
                    rewardsContainer.innerHTML = `
                        <div class="alert alert-danger">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            Failed to load rewards. Please try again later.
                        </div>
                    `;
                }
            }
            
                                        async loadTransactions() {
                                        try {
                                        if (!this.currentUser || !this.currentUser.id) {
                                        console.error('User not initialized');
                                        return;
                                        }
                                        
                                        const response = await fetch(`/.netlify/functions/getTransactions?userId=${this.currentUser.id}`);
                                        
                                        if (response.ok) {
                                        const transactions = await response.json();
                                        const container = document.getElementById('transactionHistory');
                                        container.innerHTML = '';
                                        
                                        if (transactions.length === 0) {
                                        container.innerHTML = `
                                        <div class="text-center py-4">
                                        <p>No transactions yet</p>
                                        <small class="text-muted">Complete tasks to earn your first coins!</small>
                                        </div>
                                        `;
                                        } else {
                                        transactions.forEach(transaction => {
                                        const transactionEl = document.createElement('div');
                                        transactionEl.className = 'list-group-item';
                                        
                                        // Format date properly
                                        const dateObj = new Date(transaction.date);
                                        const formattedDate = dateObj.toLocaleDateString('en-US', {
                                        month: 'short',
                                        day: 'numeric',
                                        year: 'numeric',
                                        hour: '2-digit',
                                        minute: '2-digit'
                                        });
                                        
                                        transactionEl.innerHTML = `
                                        <div class="d-flex justify-content-between">
                                        <div>
                                        <h6 class="mb-1">${transaction.description}</h6>
                                        <small class="text-muted">${formattedDate}</small>
                                        </div>
                                        <div class="${transaction.type === 'earn' ? 'text-success' : 'text-danger'}">
                                        ${transaction.type === 'earn' ? '+' : '-'}${transaction.amount} Laur
                                        </div>
                                        </div>
                                        `;
                                        container.appendChild(transactionEl);
                                        });
                                        }
                                        } else {
                                        throw new Error('Failed to load transactions');
                                        }
                                        } catch (error) {
                                        console.error('Transaction load error:', error);
                                        const container = document.getElementById('transactionHistory');
                                        container.innerHTML = `
                                        <div class="text-center py-4 text-danger">
                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                        Failed to load transactions. Please try again later.
                                        </div>
                                        `;
                                        }
                                        }
               async loadUsers() {
                try {
                    const response = await fetch('/.netlify/functions/getUsers');
                    if (response.ok) {
                        const users = await response.json();
                        const tableBody = document.getElementById('usersTableBody');
                        tableBody.innerHTML = '';
                        
                        if (users.length === 0) {
                            tableBody.innerHTML = `
                                <tr>
                                    <td colspan="6" class="text-center py-4">
                                        No users found
                                    </td>
                                </tr>
                            `;
                        } else {
                            users.forEach(user => {
                                const row = `
                                    <tr>
                                        <td>${user.id}</td>
                                        <td>${user.coins}</td>
                                        <td>${user.tasksCompleted}</td>
                                        <td>${user.referrals || 0}</td>
                                        <td>
                                            <span class="badge ${user.isActive ? 'bg-success' : 'bg-danger'}">
                                                ${user.isActive ? 'Active' : 'Inactive'}
                                            </span>
                                        </td>
                                        <td>
                                            <button class="btn btn-sm ${user.isActive ? 'btn-danger' : 'btn-success'} toggle-user" data-id="${user.id}">
                                                ${user.isActive ? 'Deactivate' : 'Activate'}
                                            </button>
                                            <button class="btn btn-sm btn-danger delete-user" data-id="${user.id}">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                `;
                                tableBody.innerHTML += row;
                            });
                        }
                    }
                } catch (error) {
                    console.error('Error loading users:', error);
                    const tableBody = document.getElementById('usersTableBody');
                    tableBody.innerHTML = `
                        <tr>
                            <td colspan="6" class="text-center py-4 text-danger">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                Failed to load users
                            </td>
                        </tr>
                    `;
                }
            }
            
            async loadAnalytics() {
                try {
                    const response = await fetch('/.netlify/functions/getAnalytics');
                    if (response.ok) {
                        const analytics = await response.json();
                        
                        document.getElementById('totalUsers').textContent = analytics.totalUsers;
                        document.getElementById('totalTasks').textContent = analytics.totalTasksCompleted;
                        document.getElementById('totalCoins').textContent = analytics.totalCoinsEarned;
                        document.getElementById('totalRewards').textContent = analytics.totalRewardsRedeemed;
                    }
                } catch (error) {
                    console.error('Error loading analytics:', error);
                }
            }
            
            async loadChatMessages() {
                try {
                    const response = await fetch('/.netlify/functions/getChatMessages');
                    if (response.ok) {
                        const messages = await response.json();
                        
                        const chatContainer = document.getElementById('chatMessages');
                        chatContainer.innerHTML = '';
                        
                        messages.forEach(message => {
                            const isSent = message.sender === this.currentUser.id;
                            const messageEl = document.createElement('div');
                            messageEl.className = `chat-message ${isSent ? 'sent' : 'received'}`;
                            messageEl.innerHTML = `
                                <div class="message-content">
                                    ${message.message}
                                </div>
                            `;
                            chatContainer.appendChild(messageEl);
                        });
                        
                        // Scroll to bottom
                        chatContainer.scrollTop = chatContainer.scrollHeight;
                    }
                } catch (error) {
                    console.error('Error loading chat messages:', error);
                }
            }
            
            async loadUserActivities() {
                try {
                    if (!this.currentUser || !this.currentUser.id) return;
                    
                    const response = await fetch(`/.netlify/functions/getUserActivities?userId=${this.currentUser.id}`);
                    if (response.ok) {
                        const activities = await response.json();
                        const container = document.getElementById('recentActivity');
                        container.innerHTML = '';
                        
                        if (activities.length === 0) {
                            container.innerHTML = `
                                <div class="list-group-item text-center py-3">
                                    <p>No recent activity</p>
                                    <small class="text-muted">Complete tasks to see activity here</small>
                                </div>
                            `;
                        } else {
                            activities.forEach(activity => {
                                const activityEl = document.createElement('div');
                                activityEl.className = 'list-group-item';
                                
                                let icon = '';
                                let text = '';
                                let amount = '';
                                
                                if (activity.type === 'transaction') {
                                    icon = activity.type === 'earn' ? 
                                        '<i class="fas fa-arrow-circle-down text-success me-2"></i>' : 
                                        '<i class="fas fa-arrow-circle-up text-danger me-2"></i>';
                                    
                                    text = activity.description;
                                    amount = activity.type === 'earn' ? 
                                        `<span class="text-success">+${activity.amount} Laur</span>` : 
                                        `<span class="text-danger">-${activity.amount} Laur</span>`;
                                } else if (activity.type === 'reward') {
                                    icon = '<i class="fas fa-gift text-warning me-2"></i>';
                                    text = `Redeemed: ${activity.description}`;
                                    amount = `<span class="text-danger">-${activity.amount} Laur</span>`;
                                }
                                
                                activityEl.innerHTML = `
                                    <div class="d-flex justify-content-between align-items-center">
                                        <div>
                                            ${icon}
                                            ${text}
                                        </div>
                                        <div>
                                            ${amount}
                                            <div class="text-muted small">${new Date(activity.date).toLocaleDateString()}</div>
                                        </div>
                                    </div>
                                `;
                                container.appendChild(activityEl);
                            });
                        }
                    }
                } catch (error) {
                    console.error('Error loading user activities:', error);
                    const container = document.getElementById('recentActivity');
                    container.innerHTML = `
                        <div class="list-group-item text-center py-3 text-danger">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            Failed to load activities
                        </div>
                    `;
                }
            }
            
               // In App class
               async loadReferralData() {
               try {
               if (!this.currentUser || !this.currentUser.id) return;
               
               const response = await fetch(`/.netlify/functions/getReferralData?userId=${this.currentUser.id}`);
               if (response.ok) {
               const data = await response.json();
               
               // Update UI elements
               document.querySelector('#referralPage .display-3.text-primary').textContent = data.referralCount;
               document.querySelector('#referralPage .display-3.text-success').textContent = data.referralEarnings;
               }
               } catch (error) {
               console.error('Referral data load error:', error);
               }
               }
               
               async startTask(taskId) {
                // Robust initialization check
                if (!this.currentUser || !this.currentUser.id) {
                    alert('Please wait while we initialize your account');
                    try {
                        await this.initUser();
                    } catch (initError) {
                        console.error('User initialization failed:', initError);
                        alert('Account initialization failed. Please refresh the page.');
                        return;
                    }
                    
                    if (!this.currentUser || !this.currentUser.id) {
                        alert('Account initialization failed. Please refresh the page.');
                        return;
                    }
                }
                
                // Show task modal
                const taskModal = new bootstrap.Modal(document.getElementById('taskModal'));
                taskModal.show();
                
                try {
                    const response = await fetch('/.netlify/functions/completeTask', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ 
                            userId: this.currentUser.id,
                            taskId: taskId
                        })
                    });
                    
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error || 'Task completion failed');
                    }
                    
                    const result = await response.json();
                    
                    taskModal.hide();
                    
                    if (result.success) {
                        // Update user coins and stats
                        this.currentUser.coins = result.newBalance;
                        this.currentUser.tasksCompleted++;
                        this.updateCoinBalances();
                        this.updateAccountStats();
                        
                        // Reload transactions and activities
                        await this.loadTransactions();
                        await this.loadUserActivities();
                        
                        alert(`Task completed! You earned ${result.coins} Laur`);
                    } else {
                        alert('Task verification failed. Please try again.');
                    }
                } catch (error) {
                    taskModal.hide();
                    console.error('Task completion error:', error);
                    alert(error.message || 'An error occurred while completing the task');
                }
            }
            
            async redeemReward(rewardId, coins) {
                if (!this.currentUser) {
                    alert('User not initialized. Please try again.');
                    return;
                }
                
                if (this.currentUser.coins < coins) {
                    alert('Not enough coins to redeem this reward!');
                    return;
                }
                
                try {
                    const response = await fetch('/.netlify/functions/redeemReward', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ 
                            userId: this.currentUser.id, 
                            rewardId: rewardId
                        })
                    });
                    
                    if (!response.ok) {
                        const errorData = await response.json();
                        throw new Error(errorData.error || 'Redemption failed');
                    }
                    
                    const result = await response.json();
                    
                    if (result.success) {
                        // Update user coins and stats
                        this.currentUser.coins = result.newBalance;
                        this.currentUser.rewardsClaimed++;
                        this.updateCoinBalances();
                        this.updateAccountStats();
                        
                        // Reload transactions and activities
                        await this.loadTransactions();
                        await this.loadUserActivities();
                        
                        // Show reward modal with token
                        const rewardModal = new bootstrap.Modal(document.getElementById('rewardModal'));
                        document.getElementById('rewardToken').textContent = `PEX-TOKEN-${Math.random().toString(36).substr(2, 8).toUpperCase()}`;
                        rewardModal.show();
                    } else {
                        alert('Reward redemption failed. Please try again.');
                    }
                } catch (error) {
                    alert(error.message || 'An error occurred while redeeming the reward');
                }
            }
            
 // Update updateCoinBalances function
updateCoinBalances() {
  if (this.currentUser) {
    const coins = this.currentUser.coins || 0; // Safe access
    document.querySelectorAll('#coinBalance, #walletBalance').forEach(el => {
      el.textContent = coins.toLocaleString();
    });
  }
}
                
                       async claimDailyReward() {
                       if (!this.currentUser?.id) {
                       this.showNotification('Error', 'Account not initialized', 'danger');
                       return;
                       }
                       
                       try {
                       const response = await fetch('/.netlify/functions/claimDailyReward', {
                       method: 'POST',
                       headers: {'Content-Type': 'application/json'},
                       body: JSON.stringify({ userId: this.currentUser.id })
                       });
                       
                       if (!response.ok) {
                       const errorData = await response.json();
                       throw new Error(errorData.error || 'Failed to claim reward');
                       }
                       
                       const result = await response.json();
                       
                       if (result.success) {
                       // Update coins
                       this.currentUser.coins += result.reward;
                       this.updateCoinBalances();
                       
                       // Update UI
                       await this.updateDailyCalendar();
                       await this.loadTransactions();
                       
                       this.showNotification(
                       'Reward Claimed!', 
                       `You earned ${result.reward} Laur! Streak: ${result.streak} days`, 
                       'success'
                       );
                       } else {
                       throw new Error(result.error || 'Failed to claim reward');
                       }
                       } catch (error) {
                       console.error('Daily claim error:', error);
                       this.showNotification('Claim Failed', error.message, 'danger');
                       }
                       }
                       
                                   async updateDailyCalendar() {
                        try {
                        if (!this.currentUser?.id) return;
                        
                        const response = await fetch(`/.netlify/functions/getDailyCheckins?userId=${this.currentUser.id}`);
                        if (!response.ok) {
                        throw new Error('Failed to get daily checkins');
                        }
                        
                        const data = await response.json();
                        const now = new Date();
                        const today = now.toISOString().split('T')[0];
                        
                        // Get start of week (Monday)
                        const startOfWeek = new Date(now);
                        startOfWeek.setDate(now.getDate() - now.getDay() + (now.getDay() === 0 ? -6 : 1));
                        
                        // Update calendar UI
                        const calendarDays = document.querySelectorAll('.calendar-day');
                        
                        // Clear all days
                        calendarDays.forEach(day => {
                        day.classList.remove('active', 'claimed');
                        day.textContent = '';
                        });
                        
                        // Fill calendar with correct dates
                        for (let i = 0; i < 7; i++) {
                        const dayDate = new Date(startOfWeek);
                        dayDate.setDate(startOfWeek.getDate() + i);
                        const dayStr = dayDate.toISOString().split('T')[0];
                        
                        // Set day number
                        calendarDays[i].textContent = dayDate.getDate();
                        
                        // Mark claimed days
                        if (data.lastClaimDate === dayStr) {
                        calendarDays[i].classList.add('claimed');
                        }
                        
                        // Mark today if not claimed
                        if (dayStr === today && data.lastClaimDate !== today) {
                        calendarDays[i].classList.add('active');
                        }
                        }
                        
                        // Update streak display
                        const streakElement = document.querySelector('.current-streak');
                        if (streakElement) {
                        streakElement.innerHTML = `<strong>Current Streak: ${data.streak || 0} days</strong>`;
                        }
                        
                        // Update claim button text
                        const claimBtn = document.getElementById('claimDailyBtn');
                        if (claimBtn && data.lastClaimDate !== today) {
                        claimBtn.disabled = false;
                        claimBtn.innerHTML = `<i class="fas fa-check-circle me-2"></i> Claim Today's Reward`;
                        } else if (claimBtn) {
                        claimBtn.disabled = true;
                        claimBtn.innerHTML = `<i class="fas fa-check-circle me-2"></i> Already Claimed`;
                        }
                        } catch (error) {
                        console.error('Calendar update error:', error);
                        }
                        }
                        showNotification(title, message, type = 'info') {
                        const toast = document.getElementById('customToast');
                        const toastTitle = document.getElementById('toastTitle');
                        const toastMessage = document.getElementById('toastMessage');
                        
                        // Set colors based on type
                        const header = toast.querySelector('.toast-header');
                        header.className = `toast-header bg-${type} text-white`;
                        
                        toastTitle.textContent = title;
                        toastMessage.textContent = message;
                        
                        // Initialize and show toast
                        const bsToast = new bootstrap.Toast(toast);
                        bsToast.show();
                        }
                        
                 async deleteReward(rewardId) {
                if (confirm('Are you sure you want to delete this reward?')) {
                    try {
                        const response = await fetch('/.netlify/functions/deleteReward', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ rewardId })
                        });
                        
                        if (response.ok) {
                            await this.loadRewards();
                            alert('Reward deleted successfully');
                        } else {
                            alert('Failed to delete reward. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error deleting reward:', error);
                    }
                }
            }
            
            async editReward(rewardId) {
                try {
                    const response = await fetch(`/.netlify/functions/getReward?rewardId=${rewardId}`);
                    if (response.ok) {
                        const reward = await response.json();
                        
                        if (reward) {
                            this.editingReward = rewardId;
                            
                            // Fill form with reward data
                            document.getElementById('rewardName').value = reward.name;
                            document.getElementById('rewardCoins').value = reward.coins;
                            document.getElementById('rewardDuration').value = reward.duration;
                            
                            // Show form
                            document.getElementById('rewardFormContainer').style.display = 'block';
                        }
                    }
                } catch (error) {
                    console.error('Error loading reward:', error);
                }
            }
            
            
            
            
            // Inside App class in offerU.html
            initSpinWheel() {
            const spinButton = document.getElementById('spinButton');
            const wheelDisplay = document.querySelector('.wheel');
            const spinsLeftEl = document.getElementById('spinsLeft');
            
            let spinsLeft = 3;
            let isSpinning = false;
            
            spinsLeftEl.textContent = spinsLeft;
            
            spinButton.addEventListener('click', async () => {
            if (isSpinning || spinsLeft <= 0) return;
            
            // Ensure user is initialized
            if (!this.currentUser?.id) {
            alert('Please wait while we initialize your account');
            return;
            }
            
            isSpinning = true;
            spinsLeft--;
            spinsLeftEl.textContent = spinsLeft;
            
            // Calculate random rotation (between 1080 and 1800 degrees)
            const rotation = 1080 + Math.floor(Math.random() * 720);
            
            // Reset transform to avoid cumulative rotations
            wheelDisplay.style.transition = 'none';
            wheelDisplay.style.transform = 'rotate(0deg)';
            
            // Force reflow
            void wheelDisplay.offsetWidth;
            
            // Apply new rotation with animation
            wheelDisplay.style.transition = 'transform 4s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
            wheelDisplay.style.transform = `rotate(${rotation}deg)`;
            
            // Determine reward after spin
            setTimeout(async () => {
            // Calculate the reward based on final position
            const normalizedRotation = rotation % 360;
            const segmentAngle = 45; // Each segment is 45 degrees
            const segmentIndex = Math.floor(normalizedRotation / segmentAngle);
            
            // Define rewards for each segment
            const rewards = [10, 20, 50, 100, 5, 25, 75, 15];
            const reward = rewards[segmentIndex];
            
            try {
            // Update user coins on server
            const response = await fetch('/.netlify/functions/updateCoins', {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json'
            },
            body: JSON.stringify({
            userId: this.currentUser.id,
            amount: reward,
            description: 'Spin Wheel Bonus'
            })
            });
            
            if (response.ok) {
            const result = await response.json();
            // Update local state
            this.currentUser.coins = result.newBalance;
            this.updateCoinBalances();
            this.updateAccountStats();
            
            // Reload transactions
            await this.loadTransactions();
            
            // Show reward
            alert(`Congratulations! You won ${reward} Laur`);
            } else {
            const errorData = await response.json();
            throw new Error(errorData.error || 'Coin update failed');
            }
            } catch (error) {
            console.error('Error updating coins:', error);
            alert('Failed to add spin reward: ' + error.message);
            }
            
            isSpinning = false;
            }, 4000);
            });
            }                                                                             
            initActivityChart() {
                const ctx = document.getElementById('activityChart').getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                        datasets: [{
                            label: 'Tasks Completed',
                            data: [12, 19, 8, 15, 14, 22, 10],
                            borderColor: '#6a11cb',
                            tension: 0.3
                        }, {
                            label: 'Coins Earned',
                            data: [1200, 1900, 800, 1500, 1400, 2200, 1000],
                            borderColor: '#2575fc',
                            tension: 0.3
                        }]
                    },
                    options: {
                        responsive: true,
                        scales: {
                            y: {
                                beginAtZero: true
                            }
                        }
                    }
                });
            }
            
            initMotivationalQuotes() {
                const quotes = [
                    "7,230 users earned rewards today!",
                    "You're just 5 tasks away from premium!",
                    "Top earners make 500+ coins daily!",
                    "Complete 3 more tasks for a bonus!",
                    "Your streak is growing! Keep it up!"
                ];
                
                const quoteElement = document.getElementById('motivationQuote');
                
                function showRandomQuote() {
                    const randomIndex = Math.floor(Math.random() * quotes.length);
                    quoteElement.innerHTML = `<i class="fas fa-quote-left me-2"></i>${quotes[randomIndex]}`;
                    setTimeout(showRandomQuote, 10000);
                }
                
                showRandomQuote();
            }
            
            async sendChatMessage() {
                const messageInput = document.getElementById('chatInput');
                const message = messageInput.value.trim();
                
                if (!message) return;
                
                try {
                    const response = await fetch('/.netlify/functions/addChatMessage', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({
                            userId: this.currentUser.id,
                            message: message
                        })
                    });
                    
                    if (response.ok) {
                        // Add message to UI immediately
                        const chatContainer = document.getElementById('chatMessages');
                        const messageEl = document.createElement('div');
                        messageEl.className = 'chat-message sent';
                        messageEl.innerHTML = `
                            <div class="message-content">
                                ${message}
                            </div>
                        `;
                        chatContainer.appendChild(messageEl);
                        
                        // Clear input
                        messageInput.value = '';
                        
                        // Scroll to bottom
                        chatContainer.scrollTop = chatContainer.scrollHeight;
                    } else {
                        alert('Failed to send message. Please try again.');
                    }
                } catch (error) {
                    console.error('Error sending chat message:', error);
                }
            }
            
            toggleTaskForm() {
                const formContainer = document.getElementById('taskFormContainer');
                formContainer.style.display = formContainer.style.display === 'block' ? 'none' : 'block';
                
                if (this.editingTask) {
                    this.editingTask = null;
                    // Reset form
                    document.getElementById('taskTitle').value = '';
                    document.getElementById('taskType').value = 'watch';
                    document.getElementById('taskCoins').value = '';
                    document.getElementById('taskUrl').value = '';
                    document.getElementById('taskDescription').value = '';
                    document.getElementById('taskFeatured').checked = false;
                }
            }
            
            toggleRewardForm() {
                const formContainer = document.getElementById('rewardFormContainer');
                formContainer.style.display = formContainer.style.display === 'block' ? 'none' : 'block';
                
                if (this.editingReward) {
                    this.editingReward = null;
                    // Reset form
                    document.getElementById('rewardName').value = '';
                    document.getElementById('rewardCoins').value = '';
                    document.getElementById('rewardDuration').value = '';
                }
            }
            
            async saveTask() {
                const title = document.getElementById('taskTitle').value.trim();
                const type = document.getElementById('taskType').value;
                const coins = parseInt(document.getElementById('taskCoins').value);
                const url = document.getElementById('taskUrl').value.trim();
                const description = document.getElementById('taskDescription').value.trim();
                const featured = document.getElementById('taskFeatured').checked;
                
                if (!title || isNaN(coins) || !description || !url) {
                    alert('Please fill all required fields');
                    return;
                }
                
                const task = {
                    title,
                    type,
                    coins,
                    url,
                    description,
                    featured,
                    active: true
                };
                
                try {
                    if (this.editingTask) {
                        // Update existing task
                        const response = await fetch(`/.netlify/functions/updateTask/${this.editingTask}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(task)
                        });
                        
                        if (!response.ok) {
                            throw new Error('Failed to update task');
                        }
                    } else {
                        // Add new task
                        const response = await fetch('/.netlify/functions/addTask', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(task)
                        });
                        
                        if (!response.ok) {
                            throw new Error('Failed to add task');
                        }
                    }
                    
                    // Reload tasks
                    await this.loadTasks();
                    
                    // Hide form
                    this.toggleTaskForm();
                } catch (error) {
                    console.error('Error saving task:', error);
                    alert('An error occurred while saving the task');
                }
            }
            
            async saveReward() {
                const name = document.getElementById('rewardName').value.trim();
                const coins = parseInt(document.getElementById('rewardCoins').value);
                const duration = document.getElementById('rewardDuration').value.trim();
                
                if (!name || isNaN(coins) || !duration) {
                    alert('Please fill all required fields');
                    return;
                }
                
                const reward = {
                    name,
                    coins,
                    duration
                };
                
                try {
                    if (this.editingReward) {
                        // Update existing reward
                        const response = await fetch(`/.netlify/functions/updateReward/${this.editingReward}`, {
                            method: 'PUT',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(reward)
                        });
                        
                        if (!response.ok) {
                            throw new Error('Failed to update reward');
                        }
                    } else {
                        // Add new reward
                        const response = await fetch('/.netlify/functions/addReward', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify(reward)
                        });
                        
                        if (!response.ok) {
                            throw new Error('Failed to add reward');
                        }
                    }
                    
                    // Reload rewards
                    await this.loadRewards();
                    
                    // Hide form
                    this.toggleRewardForm();
                } catch (error) {
                    console.error('Error saving reward:', error);
                    alert('An error occurred while saving the reward');
                }
            }
            
            async editTask(taskId) {
                try {
                    const response = await fetch(`/.netlify/functions/getTask/${taskId}`);
                    const task = await response.json();
                    
                    if (task) {
                        this.editingTask = taskId;
                        
                        // Fill form with task data
                        document.getElementById('taskTitle').value = task.title;
                        document.getElementById('taskType').value = task.type;
                        document.getElementById('taskCoins').value = task.coins;
                        document.getElementById('taskUrl').value = task.url || '';
                        document.getElementById('taskDescription').value = task.description;
                        document.getElementById('taskFeatured').checked = task.featured || false;
                        
                        // Show form
                        document.getElementById('taskFormContainer').style.display = 'block';
                    }
                } catch (error) {
                    console.error('Error loading task:', error);
                }
            }
            
            async deleteTask(taskId) {
                if (confirm('Are you sure you want to delete this task?')) {
                    try {
                        const response = await fetch(`/.netlify/functions/deleteTask/${taskId}`, {
                            method: 'DELETE'
                        });
                        
                        if (response.ok) {
                            await this.loadTasks();
                        } else {
                            alert('Failed to delete task. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error deleting task:', error);
                    }
                }
            }
            
            async toggleTaskStatus(taskId) {
                try {
                    const response = await fetch(`/.netlify/functions/toggleTaskStatus?taskId=${taskId}`, {
                        method: 'PATCH'
                    });
                    
                    if (response.ok) {
                        await this.loadTasks();
                    } else {
                        alert('Failed to update task status. Please try again.');
                    }
                } catch (error) {
                    console.error('Error toggling task status:', error);
                }
            }
            
            async toggleUserStatus(userId) {
                try {
                    const response = await fetch('/.netlify/functions/toggleUserStatus', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ userId })
                    });
                    
                    if (response.ok) {
                        await this.loadUsers();
                    } else {
                        alert('Failed to update user status. Please try again.');
                    }
                } catch (error) {
                    console.error('Error toggling user status:', error);
                }
            }
            
            async deleteUser(userId) {
                if (confirm('Are you sure you want to delete this user?')) {
                    try {
                        const response = await fetch('/.netlify/functions/deleteUser', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({ userId })
                        });
                        
                        if (response.ok) {
                            await this.loadUsers();
                        } else {
                            alert('Failed to delete user. Please try again.');
                        }
                    } catch (error) {
                        console.error('Error deleting user:', error);
                    }
                }
            }
            
            initAdminAutoLogout() {
                this.adminTimeout = setTimeout(() => {
                    if (document.getElementById('adminLogin').style.display !== 'flex') {
                        document.getElementById('adminLogin').style.display = 'flex';
                        alert('Session expired due to inactivity');
                    }
                }, 60000); // 1 minute
            }
            
            resetAdminTimer() {
                clearTimeout(this.adminTimeout);
                this.initAdminAutoLogout();
            }
            
            initEventListeners() {
                // ... (all existing event listeners remain unchanged) ...
                
            // Navigation
            document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
            const targetPage = item.getAttribute('data-page');
            if (targetPage) {
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(nav => {
            nav.classList.remove('active');
            });
            item.classList.add('active');
            
            // Show target page
            document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
            });
            document.getElementById(targetPage).classList.add('active');
            
            // Hide more menu
            document.getElementById('moreMenu').style.display = 'none';
            
            // Update chat when on feed page
            if (targetPage === 'feedPage') {
            this.loadChatMessages();
            }
            
            // Load referral data when on referral page
            if (targetPage === 'referralPage') {
            this.loadReferralData();
            }
            }
            });
            });
            
            // More menu
            document.getElementById('moreMenuBtn').addEventListener('click', () => {
            const moreMenu = document.getElementById('moreMenu');
            moreMenu.style.display = moreMenu.style.display === 'block' ? 'none' : 'block';
            });
            
            // More menu items
            document.querySelectorAll('.more-menu-item').forEach(item => {
            item.addEventListener('click', () => {
            const targetPage = item.getAttribute('data-page');
            if (targetPage) {
            // Show target page
            document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
            });
            document.getElementById(targetPage).classList.add('active');
            
            // Hide more menu
            document.getElementById('moreMenu').style.display = 'none';
            }
            });
            });
            
            // Dark mode toggle
            document.getElementById('darkModeToggle').addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            });
            
            // Notification center
            document.getElementById('notificationIcon').addEventListener('click', () => {
            document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
            });
            document.getElementById('notificationsPage').classList.add('active');
            });
            
            // Start earning button
            document.getElementById('startEarningBtn').addEventListener('click', () => {
            document.querySelectorAll('.page').forEach(page => {
            page.classList.remove('active');
            });
            document.getElementById('tasksPage').classList.add('active');
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(nav => {
            nav.classList.remove('active');
            });
            document.querySelector('[data-page="tasksPage"]').classList.add('active');
            });
            // referral count listener 
            document.querySelector('[data-page="referralPage"]').addEventListener('click', () => {
            app.loadReferralData();
            });
            
            // Admin login
            document.getElementById('adminLoginBtn').addEventListener('click', async () => {
            const token = document.getElementById('adminToken').value.trim();
            
            try {
            const response = await fetch('/.netlify/functions/adminLogin', {
            method: 'POST',
            headers: {
            'Content-Type': 'application/json'
            },
            body: JSON.stringify({ token })
            });
            
            if (response.ok) {
            document.getElementById('adminLogin').style.display = 'none';
            this.resetAdminTimer();
            } else {
            const errorData = await response.json();
            alert(errorData.error || 'Invalid admin token');
            }
            } catch (error) {
            console.error('Admin login error:', error);
            alert('An error occurred during login');
            }
            });
            
            // Admin logout
            document.getElementById('adminLogoutBtn').addEventListener('click', () => {
            document.getElementById('adminLogin').style.display = 'flex';
            });
            
            // Admin activity tracking
            document.querySelectorAll('#adminPage input, #adminPage button, #adminPage select, #adminPage textarea').forEach(el => {
            el.addEventListener('input', () => this.resetAdminTimer());
            el.addEventListener('click', () => this.resetAdminTimer());
            });
            
            // Comment toggles
            document.querySelectorAll('.comment-toggle').forEach(button => {
            button.addEventListener('click', function() {
            const commentSection = this.closest('.feed-content').querySelector('.comment-section');
            commentSection.style.display = commentSection.style.display === 'block' ? 'none' : 'block';
            });
            });
            
            // Copy referral link
            document.getElementById('copyReferralBtn').addEventListener('click', () => {
            const referralLink = document.getElementById('referralLink');
            referralLink.select();
            document.execCommand('copy');
            alert('Referral link copied to clipboard!');
            });
            
            // Send chat message
            document.getElementById('sendChatBtn').addEventListener('click', () => {
            this.sendChatMessage();
            });
            
            document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
            this.sendChatMessage();
            }
            });
            
            // Refresh feed
            document.getElementById('refreshFeedBtn').addEventListener('click', () => {
            this.loadChatMessages();
            });
            // In initEventListeners() method
            document.getElementById('claimDailyBtn').addEventListener('click', () => {
            this.claimDailyReward();
            });
            // Mark notifications as read
            document.getElementById('markAsReadBtn').addEventListener('click', () => {
            document.querySelector('.notification-badge').textContent = '0';
            alert('All notifications marked as read');
            });
            
            // Task form buttons
            document.getElementById('addTaskBtn').addEventListener('click', () => {
            this.toggleTaskForm();
            });
            
            document.getElementById('cancelTaskBtn').addEventListener('click', () => {
            this.toggleTaskForm();
            });
            
            document.getElementById('saveTaskBtn').addEventListener('click', () => {
            this.saveTask();
            });
            
            // Reward form buttons
            document.getElementById('addRewardBtn').addEventListener('click', () => {
            this.toggleRewardForm();
            });
            
            document.getElementById('cancelRewardBtn').addEventListener('click', () => {
            this.toggleRewardForm();
            });
            
            document.getElementById('saveRewardBtn').addEventListener('click', () => {
            this.saveReward();
            });
            
            // Task buttons
            document.addEventListener('click', (e) => {
            if (e.target.classList.contains('start-task')) {
            const taskId = e.target.getAttribute('data-id');
            this.startTask(taskId);
            }
            
            if (e.target.classList.contains('redeem-btn')) {
            const rewardId = e.target.getAttribute('data-id');
            const coins = parseInt(e.target.getAttribute('data-coins'));
            this.redeemReward(rewardId, coins);
            }
            
            if (e.target.classList.contains('edit-task') || e.target.parentElement.classList.contains('edit-task')) {
            const taskId = e.target.closest('.edit-task').getAttribute('data-id');
            this.editTask(taskId);
            }
            
            if (e.target.classList.contains('delete-task') || e.target.parentElement.classList.contains('delete-task')) {
            const taskId = e.target.closest('.delete-task').getAttribute('data-id');
            this.deleteTask(taskId);
            }
            
            if (e.target.classList.contains('toggle-task') || e.target.parentElement.classList.contains('toggle-task')) {
            const taskId = e.target.closest('.toggle-task').getAttribute('data-id');
            this.toggleTaskStatus(taskId);
            }
            
            if (e.target.classList.contains('toggle-user') || e.target.parentElement.classList.contains('toggle-user')) {
            const userId = e.target.closest('.toggle-user').getAttribute('data-id');
            this.toggleUserStatus(userId);
            }
            
            if (e.target.classList.contains('delete-user') || e.target.parentElement.classList.contains('delete-user')) {
            const userId = e.target.closest('.delete-user').getAttribute('data-id');
            this.deleteUser(userId);
            }
            
            if (e.target.classList.contains('edit-reward') || e.target.parentElement.classList.contains('edit-reward')) {
            const rewardId = e.target.closest('.edit-reward').getAttribute('data-id');
            this.editReward(rewardId);
            }
            
            if (e.target.classList.contains('delete-reward') || e.target.parentElement.classList.contains('delete-reward')) {
            const rewardId = e.target.closest('.delete-reward').getAttribute('data-id');
            this.deleteReward(rewardId);
            }
            });
            }
            
        }

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', () => {
            const app = new App();
        });
    </script>
</body>

</html> 









